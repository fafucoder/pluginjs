@import "@pluginjs/styles/variables.scss";

// Vars
// =====================
$popover: "pj-popover" !default;
$popover-zindex: $zindex-popover !default;
$popover-max-height: 50vh !default;

$popover-bg: $color-white !default;

$popover-arrow-size: 10px !default;
$popover-arrow-spacer: $popover-arrow-size * 0.75 !default;
$popover-arrow-pos: 20px !default;
$popover-arrow-pos-vertical: 10px !default;
// $popover-line-hight: 22px !default;

// $popover-title-line-height: 1.5em !default;

// $popover-arrow-width: 10px !default;
// $popover-arrow-spacer: $popover-arrow-width + 1 !default;
// $popover-arrow-color: $color-white !default;
// $popover-arrow-offset-x: 10px !default;
// $popover-arrow-offset-y: 10px !default;

// Core
// =====================
.#{$popover} {
  position: absolute;
  top: 0;
  left: 0;
  z-index: $popover-zindex;
  box-sizing: border-box;
  display: block;
  background-color: $popover-bg;

  &-inner {
    box-sizing: border-box;
    width: 100%;
    max-height: $popover-max-height;
    overflow: auto;

    > * {
      &:first-child {
        margin-top: 0;
      }

      &:last-child {
        margin-bottom: 0;
      }
    }
  }

  &-close {
    position: absolute;
    top: 0;
    right: 0;
    z-index: 1;
    cursor: pointer;
  }

  .#{$popover}-content {
    > * {
      &:first-child {
        margin-top: 0;
      }

      &:last-child {
        margin-bottom: 0;
      }
    }
  }

  &-fade {
    opacity: 0;
    transition: opacity 0.15s linear;
  }

  &-show {
    opacity: 1;
  }
}

.#{$popover}-arrow {
  &::before {
    position: absolute;
    width: $popover-arrow-size;
    height: $popover-arrow-size;
    content: "";
    background-color: $popover-bg;
  }

  &[x-placement^="top"],
  &[x-placement^="bottom"] {
    &::before {
      transform: translateY(-50%) rotate(45deg);
    }
  }

  &[x-placement^="right"],
  &[x-placement^="left"] {
    &::before {
      transform: translateX(-50%) rotate(45deg);
    }
  }

  &[x-placement="top"],
  &[x-placement="right"],
  &[x-placement="bottom"],
  &[x-placement="left"] {
    &::before {
      transform: translate(-50%, -50%) rotate(45deg);
    }
  }

  &[x-placement^="top"] {
    margin-bottom: $popover-arrow-spacer;

    &::before {
      top: 100%;
    }
  }

  &[x-placement^="right"] {
   margin-left: $popover-arrow-spacer;

    &::before {
      left: 0;
    }
  }

  &[x-placement^="bottom"] {
    margin-top: $popover-arrow-spacer;

    &::before {
      top: 0;
    }
  }

  &[x-placement^="left"] {
    margin-right: $popover-arrow-spacer;

    &::before {
      left: 100%;
    }
  }

  &[x-placement="top"],
  &[x-placement="bottom"] {
    &::before {
      left: 50%;
    }
  }

  &[x-placement="top-start"],
  &[x-placement="bottom-start"] {
    &::before {
      left: $popover-arrow-pos;
    }
  }

  &[x-placement="top-end"],
  &[x-placement="bottom-end"] {
    &::before {
      right: #{$popover-arrow-pos};
    }
  }

  &[x-placement="left"],
  &[x-placement="right"] {
    &::before {
      top: 50%;
    }
  }

  &[x-placement="left-start"],
  &[x-placement="right-start"] {
    &::before {
      top: $popover-arrow-pos-vertical;
    }
  }

  &[x-placement="left-end"],
  &[x-placement="right-end"] {
    &::before {
      bottom: #{$popover-arrow-pos-vertical};
    }
  }
}
