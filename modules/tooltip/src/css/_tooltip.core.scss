@import "@pluginjs/styles/variables.scss";

// Vars
// =====================
$tooltip: "pj-tooltip" !default;
$tooltip-zindex: $zindex-tooltip !default;
$tooltip-max-height: 50vh !default;

$tooltip-color: $color-white !default;
$tooltip-bg: $gray-darkest !default;

$tooltip-arrow-size: 10px !default;
$tooltip-arrow-spacer: 0 !default;
$tooltip-arrow-pos: 20px !default;
$tooltip-arrow-pos-vertical: 10px !default;

// Core
// =====================
.#{$tooltip} {
  position: absolute;
  top: 0;
  left: 0;
  z-index: $tooltip-zindex;
  box-sizing: border-box;
  display: block;

  &-fade {
    opacity: 0;
    transition: opacity 0.15s linear;
  }

  &-show {
    opacity: 1;
  }

  &[x-placement^="top"] {
    margin-bottom: $tooltip-arrow-spacer;
  }

  &[x-placement^="right"] {
   margin-left: $tooltip-arrow-spacer;
  }

  &[x-placement^="bottom"] {
    margin-top: $tooltip-arrow-spacer;
  }

  &[x-placement^="left"] {
    margin-right: $tooltip-arrow-spacer;
  }
}

.#{$tooltip}-inner {
  box-sizing: border-box;
  width: 100%;
  max-height: $tooltip-max-height;
  overflow: auto;
  color: $tooltip-color;
  background-color: $tooltip-bg;

  > * {
    &:first-child {
      margin-top: 0;
    }

    &:last-child {
      margin-bottom: 0;
    }
  }

  &::before {
    position: absolute;
    z-index: -1;
    width: $tooltip-arrow-size;
    height: $tooltip-arrow-size;
    content: "";
    background-color: inherit;
  }

  [x-placement^="top"] &,
  [x-placement^="bottom"] & {
    &::before {
      transform: translateY(-50%) rotate(45deg);
    }
  }

  [x-placement^="right"] &,
  [x-placement^="left"] & {
    &::before {
      transform: translateX(-50%) rotate(45deg);
    }
  }

  [x-placement="top"] &,
  [x-placement="right"] &,
  [x-placement="bottom"] &,
  [x-placement="left"] & {
    &::before {
      transform: translate(-50%, -50%) rotate(45deg);
    }
  }

  [x-placement^="top"] & {
    &::before {
      top: 100%;
    }
  }

  [x-placement^="right"] & {
    &::before {
      left: 0;
    }
  }

  [x-placement^="bottom"] & {
    &::before {
      top: 0;
    }
  }

  [x-placement^="left"] & {
    &::before {
      left: 100%;
    }
  }

  [x-placement="top"] &,
  [x-placement="bottom"] & {
    &::before {
      left: 50%;
    }
  }

  [x-placement="top-start"] &,
  [x-placement="bottom-start"] & {
    &::before {
      left: $tooltip-arrow-pos;
    }
  }

  [x-placement="top-end"] &,
  [x-placement="bottom-end"] & {
    &::before {
      right: #{$tooltip-arrow-pos};
    }
  }

  [x-placement="left"] &,
  [x-placement="right"] & {
    &::before {
      top: 50%;
    }
  }

  [x-placement="left-start"] &,
  [x-placement="right-start"] & {
    &::before {
      top: $tooltip-arrow-pos-vertical;
    }
  }

  [x-placement="left-end"] &,
  [x-placement="right-end"] & {
    &::before {
      bottom: #{$tooltip-arrow-pos-vertical};
    }
  }
}

